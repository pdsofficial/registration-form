<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Paniya Digital Success</title>
<style>
  :root{--card-w:420px}
  html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;background:#f2f2f2}
  .center-wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
  .form-card{
    width:100%;max-width:var(--card-w);background:#fff;border-radius:12px;
    box-shadow:0 6px 25px rgba(0,0,0,0.12);overflow:hidden;padding:14px;
  }
  /* ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π ‡§ú‡§º‡•Ç‡§Æ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•Å‡§Ü QR-only ‡§è‡§∞‡§ø‡§Ø‡§æ (‡§ï‡•ã‡§à ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç) */
  .qr-only {
    width:100%;
    height:420px;                 /* ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§¨‡§¢‡§º‡§æ‡§è‡§Å/‡§ò‡§ü‡§æ‡§è‡§Å */
    background:#fff;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .qr-only img{
    height:110%;                  /* ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§π‡§æ‡§á‡§ü ‡§§‡§æ‡§ï‡§ø ‡§™‡•Ç‡§∞‡§æ ‡§è‡§∞‡§ø‡§Ø‡§æ QR ‡§∏‡•á ‡§≠‡§∞‡§æ ‡§∞‡§π‡•á */
    width:auto;
    object-fit:cover;
    display:block;
    cursor:pointer;
    transform:scale(1.02);        /* ‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§ú‡§º‡•Ç‡§Æ ‡§≠‡§∞ ‡§¶‡§ø‡§ñ‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è */
  }

  /* ‡§¨‡§æ‡§ï‡•Ä ‡§´‡•â‡§∞‡•ç‡§Æ ‡§è‡§≤‡§ø‡§Æ‡•á‡§Ç‡§ü‡•ç‡§∏ */
  .fields { padding:12px 2px; }
  .fields input, .fields select, .fields button{
    width:100%;box-sizing:border-box;padding:10px 12px;margin:8px 0;border-radius:8px;border:1px solid #ccc;font-size:15px;
  }
  .fields button{background:#0b86ff;color:#fff;border:none;font-weight:600;padding:12px}
  .fields button:disabled{background:#bbb;cursor:not-allowed}
  .error-msg{color:#d62828;font-weight:700;text-align:center;margin-top:6px;min-height:20px}
  @media(max-width:460px){
    .qr-only{height:360px}
    :root{--card-w:360px}
  }
</style>

<!-- Tesseract JS for OCR -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.0.2/dist/tesseract.min.js"></script>
</head>
<body>
  <div class="center-wrap">
    <div class="form-card" role="region" aria-label="Registration form">
      <!-- QR-only area: ‡§ï‡•ã‡§à ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç, ‡§∏‡§ø‡§∞‡•ç‡§´ QR ‡§á‡§Æ‡•á‡§ú -->
      <div class="qr-only">
        <img id="qrImage" src="https://i.postimg.cc/hjY5WhXy/Account-QRCode-1785-LIGHT-THEME.png" alt="QR Scanner">
      </div>

      <!-- ‡§¨‡§æ‡§ï‡•Ä ‡§´‡•Ä‡§≤‡•ç‡§°‡•ç‡§∏ -->
      <div class="fields">
        <input id="name" type="text" placeholder="‡§®‡§æ‡§Æ" required />
        <input id="mobile" type="tel" pattern="[0-9]{10}" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞" required />
        <select id="gender" required>
          <option value="">‡§ú‡•á‡§Ç‡§°‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>

        <input id="screenshot" type="file" accept="image/*" />
        <div id="errorMsg" class="error-msg">‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡§∞‡•á‡§Ç</div>

        <button id="submitBtn" disabled type="button">‡§∏‡§¨‡§Æ‡§ø‡§ü</button>
      </div>
    </div>
  </div>

<script>
  // Elements
  const qrImage = document.getElementById('qrImage');
  const screenshot = document.getElementById('screenshot');
  const submitBtn = document.getElementById('submitBtn');
  const errorMsg = document.getElementById('errorMsg');

  // UPI ‡§≤‡§ø‡§Ç‡§ï (‡§Ü‡§™‡§ï‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§î‡§∞ ‡§∞‡§æ‡§∂‡§ø)
  const upiLink = "upi://pay?pa=9509607895@upi&pn=PaniyaDigitalSuccess&am=500&cu=INR";

  // QR ‡§™‡§∞ ‡§ü‡§ö/‡§ï‡•ç‡§≤‡§ø‡§ï ‚Üí ‡§Ø‡•Ç‡§ú‡§∞ ‡§ï‡•á ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§™‡§∞ UPI ‡§ê‡§™ ‡§ì‡§™‡§® ‡§π‡•ã‡§ó‡§æ
  qrImage.addEventListener('click', () => {
    // ‡§ï‡•ã‡§∂‡§ø‡§∂: ‡§Ø‡§¶‡§ø ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ UPI URI ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á ‡§§‡•ã ‡§Ø‡§π ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§™‡§∞ UPI ‡§ê‡§™ ‡§ñ‡•ã‡§≤ ‡§¶‡•á‡§ó‡§æ
    window.location.href = upiLink;
    // ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡•ã ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂
    setTimeout(()=> {
      // ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§™‡§∞ ‡§ê‡§™ ‡§ñ‡•Å‡§≤‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è ‚Äî optional alert (‡§∏‡•ç‡§≤‡§ø‡§Æ)
      // alert("UPI ‡§ê‡§™ ‡§ñ‡•Å‡§≤ ‡§ó‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ ‚Äî ‡§ï‡•É‡§™‡§Ø‡§æ ‚Çπ500 ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§∂‡•â‡§ü ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç‡•§");
    },150);
  });

  // OCR ‡§ö‡•á‡§ï ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
  async function checkScreenshotForText(dataURL){
    try{
      const res = await Tesseract.recognize(dataURL, 'eng+hin', { logger: m => console.log(m) });
      const text = (res && res.data && res.data.text) ? res.data.text : '';
      console.log("OCR detected:", text);
      // ‡§∏‡§ü‡•Ä‡§ï ‡§Æ‡•à‡§ö ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à ‚Äî ‡§Ü‡§™ ‡§Ø‡§π‡§æ‡§Å ‡§∏‡§æ‡§Æ‡§Ç‡§ú‡§∏‡•ç‡§Ø ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç (case-insensitive)
      const need = "Panne khan ‚Çπ500 ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§∏‡§´‡§≤ ‡§∞‡§π‡§æ";
      // Normalize (remove extra spaces, toLowerCase) for robustness
      const norm = text.replace(/\s+/g,' ').trim().toLowerCase();
      const normNeed = need.replace(/\s+/g,' ').trim().toLowerCase();
      return norm.includes(normNeed);
    }catch(err){
      console.error("OCR error:", err);
      return false;
    }
  }

  // ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§∂‡•â‡§ü ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•à‡§Ç‡§°‡§≤
  screenshot.addEventListener('change', async () => {
    submitBtn.disabled = true;             // ‡§™‡§π‡§≤‡•á disabled ‡§∞‡§ñ‡•á‡§Ç
    errorMsg.textContent = "‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡§∞‡•á‡§Ç"; // ‡§π‡§Æ‡•á‡§∂‡§æ ‡§≤‡§æ‡§≤ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ (CSS ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ)
    if(!screenshot.files || screenshot.files.length === 0) return;

    const file = screenshot.files[0];
    const reader = new FileReader();
    reader.onload = async function(ev){
      const dataURL = ev.target.result;
      // OCR ‡§ö‡§≤‡§æ‡§è‡§Å ‡§î‡§∞ ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç
      const ok = await checkScreenshotForText(dataURL);
      if(ok){
        submitBtn.disabled = false;
        // ‡§Ö‡§ó‡§∞ ‡§Ü‡§™ ‡§ö‡§æ‡§π‡•á‡§Ç ‡§§‡•ã ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç; ‡§™‡§∞ ‡§Ü‡§™‡§®‡•á ‡§ï‡§π‡§æ ‡§π‡§Æ‡•á‡§∂‡§æ ‡§¶‡§ø‡§ñ‡•á ‡§§‡•ã ‡§π‡§Æ ‡§µ‡§π‡•Ä ‡§∞‡§ñ‡§®‡§æ ‡§π‡•à‡§Ç
        // errorMsg.textContent = ""; // ‡§Ø‡§¶‡§ø ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç ‡§§‡•ã ‡§Ö‡§®-‡§ï‡•â‡§Æ‡•á‡§Ç‡§ü ‡§ï‡§∞‡•á‡§Ç
      } else {
        submitBtn.disabled = true;
        errorMsg.textContent = "‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡§∞‡•á‡§Ç";
      }
    };
    reader.readAsDataURL(file);
  });

  // ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§¨‡§ü‡§® ‡§ï‡•á ‡§≤‡§ø‡§Ø‡•á ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ (‡§∏‡§´‡§≤ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ WhatsApp ‡§∞‡•Ä‡§°‡§æ‡§Ø‡§∞‡•á‡§ï‡•ç‡§ü)
  submitBtn.addEventListener('click', () => {
    // ‡§Ø‡§π‡§æ‡§Å ‡§Ü‡§™ ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§ï‡•ã ‡§≠‡•á‡§ú‡§®‡•á ‡§ï‡§æ ‡§≤‡•â‡§ú‡§ø‡§ï ‡§ú‡•ã‡§°‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç (‡§Ø‡§¶‡§ø ‡§ö‡§æ‡§π‡§ø‡§è)
    alert("üéâ Congratulations! Registration Successful.");
    // Redirect to WhatsApp chat (‡§Ü‡§™‡§ï‡§æ ‡§®‡§Ç‡§¨‡§∞)
    window.location.href = "https://wa.me/9509607895";
  });
</script>
</body>
</html>
